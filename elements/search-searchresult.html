<link rel="import" href="../components/polymer/polymer.html">
<link rel="import" href="../components/polymer-ui-icon-button/polymer-ui-icon-button.html">
<link rel="import" href="fish-species.html">

<polymer-element name="search-searchresult" noscript attributes="species add maximize">
  <template>
    <template if="{{maximize}}">
      <fish-species species="{{species}}"></fish-species>    
    </template>
    <template if="{{!maximize}}">
      <div class="panel info" style="vertical-align:top;clear:both;{{ disabled ? 'opacity:0.15' : ''}};">
		
	<polymer-ui-icon-button icon="add" style="float:right;margin-left:15px;{{ disabled ? 'display:none' : ''}}" on-click="{{add}}"></polymer-ui-icon-button>
	<!--<polymer-ui-icon-button icon="dialog" style="float:right;margin-left:15px" onclick="document.location.href='fish.html'"></polymer-ui-icon-button>-->
	<div style="float:right;margin:-3px 0 -3px;">
	  <input id="number" type="text" class="form-control input-lg" placeholder="#" style="width:75px;text-align:right;" value="{{species.number}}"/>
	  <span class="input-group-addon" style="padding-left:0px;">Many</span>
	</div>
	
	<img title="{{species.scientificName}}" alt="{{species.scientificName}}" src="{{species.src}}" width="100px" height="50px" style="float:left;border-radius:4px;margin:-5px 10px 0 -5px;" />
	
	<div style="display:inline-block">
	  <strong>{{species.name}}</strong><br/>
	  {{species.scientificName}}
	</div>
	<div class="input-group-addon" style="float:right;">
	  ${{species.price}}
	</div>
      </div>
    </template>
  </template>
  <script>
    Polymer('search-searchresult', {
      add: function() {
	if(this.species.number == null || this.species.number == ''){
	  alert('Please enter the number of [' + this.species.scientificName + '] specimen you wish to purchase.');
	  this.$.number.focus();
	}else{
	  this.fire('add', this.species);
	  this.disabled = true;
	}
      }    
    });
  </script>    
</polymer-element>  